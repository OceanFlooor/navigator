{"version":3,"sources":["main.js"],"names":["hashMap","JSON","parse","localStorage","getItem","collection","$","add","search","searchInput","backdrop","item","find","render","on","e","stopPropagation","url","window","prompt","push","handleUrl","setStorage","el","target","currentTarget","dataset","idx","undefined","parentNode","openUrl","removeClass","handleDialog","searchVal","val","length","location","attr","userEnter","match","domain","console","log","html","map","toUpperCase","remove","insertBefore","inputSite","finish","deleteBtn","hashItem","addClass","removeAttr","splice","setItem","stringify","timer","clearTimeout","setTimeout"],"mappings":"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","file":"main.3a90d0b0.js","sourceRoot":"..\\src","sourcesContent":["/**\r\n * Created by 83617 on 2020/7/21.\r\n */\r\nlet hashMap = JSON.parse(localStorage.getItem(\"ravenMap\")) || []\r\nlet collection = $(\".collection\")\r\nlet add = $(\"#add\")\r\nlet search = $(\".search-icon\")\r\nlet searchInput = $(\"#search-input\")\r\nlet backdrop = $(\".backdrop\")\r\nlet item = collection.find(\".item-container:not(#add)\")\r\n\r\nrender()\r\n\r\nadd.on(\"click\", (e) => {\r\n  e.stopPropagation()\r\n  let url = window.prompt(\"网址？\")\r\n  if (url) {\r\n    hashMap.push(handleUrl(url))\r\n    setStorage()\r\n    render()\r\n  }\r\n})\r\n\r\n// 事件代理collection\r\ncollection.on(\"click\", (e) => {\r\n  // console.dir(e.target)\r\n  let el = e.target\r\n  if (el === e.currentTarget) return\r\n\r\n  while (el && el.dataset && el.dataset.idx === undefined) {\r\n    if (el === e.currentTarget) {\r\n      el = null\r\n      break\r\n    }\r\n    el = el.parentNode\r\n  }\r\n  let idx = el.dataset.idx\r\n  idx && openUrl(hashMap[idx].url)\r\n})\r\n\r\n$(\".more\").on(\"click\", (e) => {\r\n  e.stopPropagation()\r\n\r\n  let el = e.target\r\n  while (el && el.dataset && el.dataset.idx === undefined) {\r\n    el = el.parentNode\r\n  }\r\n  let idx = el.dataset.idx\r\n\r\n  backdrop.removeClass(\"dis-none\")\r\n  handleDialog(idx)\r\n})\r\n\r\nsearch.on(\"click\", (e) => {\r\n  let searchVal = searchInput.val()\r\n\r\n  searchVal.length &&\r\n    $(location).attr(\"href\", `https://cn.bing.com/search?q=${searchVal}`)\r\n})\r\n\r\nfunction handleUrl(url) {\r\n  let userEnter = url\r\n  if (!url.match(/^(http:\\/\\/)|(https:\\/\\/)/)) {\r\n    url = \"https://\" + url\r\n  }\r\n  let domain = url.match(/(?<=(\\/\\/))[\\.\\w]*/)[0]\r\n  console.log(\"输入域名:\" + domain)\r\n  return { url, userEnter, domain }\r\n}\r\n\r\nfunction render() {\r\n  let html = \"\"\r\n  hashMap.map((item, idx) => {\r\n    html += `\r\n    <div class=\"item-container\" data-idx=\"${idx}\">\r\n      <div class=\"inner\">\r\n        <div class=\"mini-logo\">${item.domain[0].toUpperCase()}</div>\r\n        <div class=\"title\">\r\n          <span>${item.domain}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"more\" data-idx=\"${idx}\">\r\n        <svg class=\"icon\" aria-hidden=\"true\">\r\n          <use xlink:href=\"#icon-more\"></use>\r\n        </svg>\r\n      </div>\r\n    </div>\r\n    `\r\n  })\r\n\r\n  item.remove()\r\n  $(html).insertBefore(add)\r\n  item = collection.find(\".item-container:not(#add)\")\r\n}\r\n\r\nfunction handleDialog(idx) {\r\n  let inputSite = $(\"#inputSite\")\r\n  let finish = $(\".finish\")\r\n  let deleteBtn = $(\".delete\")\r\n  let hashItem = hashMap[idx]\r\n\r\n  inputSite.val(hashItem.url)\r\n  !inputSite.val().length && finish.attr(\"disabled\", \"disabled\")\r\n\r\n  // cancel\r\n  $(\".cancel\").on(\"click\", () => {\r\n    backdrop.addClass(\"dis-none\")\r\n  })\r\n\r\n  inputSite.on(\"input\", (e) => {\r\n    inputSite.val().length\r\n      ? finish.removeAttr(\"disabled\")\r\n      : finish.attr(\"disabled\", \"disabled\")\r\n  })\r\n\r\n  // finish\r\n  finish.on(\"click\", () => {\r\n    hashMap[idx] = handleUrl(inputSite.val())\r\n    backdrop.addClass(\"dis-none\")\r\n    setStorage()\r\n    render()\r\n  })\r\n\r\n  deleteBtn.on(\"click\", () => {\r\n    hashMap.splice(idx, 1)\r\n    backdrop.addClass(\"dis-none\")\r\n    setStorage()\r\n    render()\r\n  })\r\n}\r\n\r\nfunction openUrl(url) {\r\n  $(location).attr(\"href\", url)\r\n}\r\n\r\nfunction setStorage() {\r\n  localStorage.setItem(\"ravenMap\", JSON.stringify(hashMap))\r\n}\r\n\r\n;(function () {\r\n  let timer\r\n  item.on(\"touchstart\", (e) => {\r\n    timer && clearTimeout(timer)\r\n    timer = setTimeout(() => {\r\n      backdrop.removeClass(\"dis-none\")\r\n\r\n      let el = e.target\r\n      while (el && el.dataset && el.dataset.idx === undefined) {\r\n        el = el.parentNode\r\n      }\r\n      let idx = el.dataset.idx\r\n\r\n      handleDialog(idx)\r\n    }, 500)\r\n  })\r\n\r\n  item.on(\"touchmove\", () => {\r\n    clearTimeout(timer)\r\n  })\r\n\r\n  item.on(\"touchend\", () => {\r\n    clearTimeout(timer)\r\n  })\r\n})()\r\n"]}